---------------------------------------------------
-------     EJERCICIO BIBLIOTECA    ---------------
---------------------------------------------------

CREATE TABLE AUTORES (
AUTOR_ID NUMBER PRIMARY KEY,
NOMBRE NVARCHAR2 (35),
NACIONALIDAD NVARCHAR2(35)
);

CREATE TABLE SOCIOS(
SOCIO_ID NUMBER PRIMARY KEY,
NOMBRE NVARCHAR2 (35),
DIRECCION NVARCHAR2 (50),
TELEFONO NUMBER (10)
);

CREATE TABLE LIBROS (
LIBRO_ID NUMBER PRIMARY KEY,
NOMBRE NVARCHAR2 (25),
AUTOR_ID NUMBER,
CANITDAD NUMBER,
CONSTRAINT FK_AUTOR_ID FOREIGN KEY (AUTOR_ID) REFERENCES AUTORES(AUTOR_ID)
);

CREATE TABLE REGISTROS_PRESTAMO (
PRESTAMO_ID NUMBER PRIMARY KEY,
SOCIO_ID NUMBER,
FECHA_PRESTAMO DATE,
FECHA_DEVOLUCION DATE,
CONSTRAINT FK_SOCIO_ID FOREIGN KEY (SOCIO_ID) REFERENCES SOCIOS (SOCIO_ID)
);
--ALTER TABLE STATUS_ALUMNOS RENAME COLUMN SATUS_ID TO STATUS_ID;
--ALTER TABLE REGISTROS_PRESTAMO RENAME COLUMN FECHAR_DEVOLUCION TO FECHA_DEVOLUCION;
DESCRIBE AUTORES;
INSERT INTO AUTORES VALUES (1, 'CHARLES', 'BOGOTA');
INSERT INTO AUTORES VALUES (2, 'CANSERBERO', 'VENEZUELA');
INSERT INTO AUTORES VALUES (3, 'OSITOS', 'MEICO');
INSERT INTO AUTORES VALUES (4, 'MIGUEL DE CERVANTES', 'MEXICO');
INSERT INTO AUTORES VALUES (5, 'TOLKIEN', 'USA');
SELECT * FROM AUTORES;
COMMIT;

DESCRIBE SOCIOS;
INSERT INTO SOCIOS VALUES (1, 'CARLOS', 'CDMX', 7121454544);
INSERT INTO SOCIOS VALUES (2, 'RAFAEL', 'MONTERREY', 5544248989);
INSERT INTO SOCIOS VALUES (3, 'ERNES', 'XALAPA', 9898986434);
INSERT INTO SOCIOS VALUES (4, 'FABIOLA', 'SAN LUIS', 4536283382);
INSERT INTO SOCIOS VALUES (5, 'JERONIMO', 'CDMX', 2122898966);
SELECT * FROM SOCIOS;
COMMIT;

DESCRIBE LIBROS;
INSERT INTO LIBROS VALUES (1, 'QUIJOTE', 1, 2);
INSERT INTO LIBROS VALUES (2, 'ODISEA', 3, 5);
INSERT INTO LIBROS VALUES (3, 'CODIGO DA VINCI', 4, 3);
INSERT INTO LIBROS VALUES (4, 'SHUECK', 2, 10);
INSERT INTO LIBROS VALUES (5, 'HOMERO', 5, 2);
INSERT INTO LIBROS VALUES (6, 'LA LLAMADA DE CTHULHU', 10, 5);
INSERT INTO LIBROS VALUES (7, 'La casa torcida', 11, 3);

SELECT * FROM LIBROS;
COMMIT;

DESCRIBE REGISTROS_PRESTAMO;
INSERT INTO REGISTROS_PRESTAMO VALUES(1, 1, '10/05/2022', '10/05/2023');
INSERT INTO REGISTROS_PRESTAMO VALUES(2, 2, '20/01/2023', '01/05/2023');
INSERT INTO REGISTROS_PRESTAMO VALUES(3, 5, '02/02/2021', '02/02/2022');
INSERT INTO REGISTROS_PRESTAMO VALUES(4, 4, '25/09/2019', '25/09/2021');
INSERT INTO REGISTROS_PRESTAMO VALUES(5, 3, '01/01/2024', '01/06/2024');
SELECT * FROM REGISTROS_PRESTAMO;
COMMIT;

-- AGREGAR LIBRO PRESTADO
ALTER TABLE REGISTROS_PRESTAMO ADD LIBRO_ID INTEGER;
UPDATE REGISTROS_PRESTAMO SET LIBRO_ID = 5 WHERE SOCIO_ID = 1;
UPDATE REGISTROS_PRESTAMO SET LIBRO_ID = 4 WHERE SOCIO_ID = 2;
UPDATE REGISTROS_PRESTAMO SET LIBRO_ID = 3 WHERE SOCIO_ID = 3;
UPDATE REGISTROS_PRESTAMO SET LIBRO_ID = 2 WHERE SOCIO_ID = 4;
UPDATE REGISTROS_PRESTAMO SET LIBRO_ID = 1 WHERE SOCIO_ID = 5;
COMMIT;

INSERT INTO REGISTROS_PRESTAMO VALUES(6, 20, '23/08/2021', '01/06/2021',4);
INSERT INTO REGISTROS_PRESTAMO VALUES(7, 21, '13/07/2020', '01/07/2020',4);
COMMIT;
